<!DOCTYPE html>
<html>

	<head>
		<meta charset="utf-8" />
		<title>二维码生成页面</title>
		<meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no" />
		<link rel="stylesheet" type="text/css" href="css/api.css" />
		<style type="text/css">
			html,
			body {
				background-color: #f2f2f2;
			}
			
			.header {
				text-align: center;
				line-height: 120px;
				color: #3a3a3a;
				font-size: 18px;
				margin-top: 50px;
			}
			
			.ereaContanier {}
			
			.ereatip {
				padding-left: 20px;
				font-size: 12px;
				color: #b1b1b1;
				margin-bottom: 5px;
			}
			
			.ereaSelect {
				border-top: 1px solid #cacaca;
				border-bottom: 1px solid #cacaca;
				height: 45px;
				line-height: 45px;
				background-color: #fff;
			}
			
			.ereaSelect>div {
				float: left;
				width: 33.3%;
				text-align: center;
				font-size: 14px;
			}
			
			.ereaSelect>div:first-child {
				text-align: left;
				padding-left: 20px;
			}
			
			.selectp,
			.selectc {
				height: 43px;
				line-height: 43px;
				float: left;
				border: none;
				font-size: 14px;
				-webkit-appearance: none;
				/*for chrome*/
				color: #a6a3a3;
				width: 33.3%;
				text-align: center;
				background-color: transparent;
			}
			
			.footer {
				position: absolute;
				left: 0;
				bottom: 0;
				width: 100%;
				height: 50px;
				line-height: 50px;
				font-size: 16px;
				color: #fff;
				text-align: center;
				background-color: #f0c826;
			}
			.footer:active{
				background-color: #cba921;
			}
			/*loading*/
			.loading{
				position: fixed;
				left: 50%;
				top: 50%;
				width: 160px;
				padding: 30px 0;
				background-color: #303138;
				text-align: center;
				-webkit-transform: translateX(-50%) translateY(-50%);
				-moz-transform: translateX(-50%) translateY(-50%);
				-ms-transform: translateX(-50%) translateY(-50%);
				-o-transform: translateX(-50%) translateY(-50%);
				transform: translateX(-50%) translateY(-50%);
				border-radius: 7px;
				display: none;
			}
			.loadEffect {
				width: 60px;
				height: 60px;
				position: relative;
				margin: 0 auto;
				/*display: none;*/
			}
			
			.loadEffect span {
				display: inline-block;
				width: 8px;
				height: 8px;
				border-radius: 50%;
				background-color: #ececec;
				position: absolute;
				-webkit-animation: load 1.04s ease infinite;
			}
			
			@-webkit-keyframes load {
				0% {
					opacity: 1;
				}
				100% {
					opacity: 0.2;
				}
			}
			
			.loadEffect span:nth-child(1) {
				left: 0;
				top: 50%;
				margin-top: -4px;
				-webkit-animation-delay: 0.13s;
			}
			
			.loadEffect span:nth-child(2) {
				left: 8px;
				top: 8px;
				-webkit-animation-delay: 0.26s;
			}
			
			.loadEffect span:nth-child(3) {
				left: 50%;
				top: 0;
				margin-left: -4px;
				-webkit-animation-delay: 0.39s;
			}
			
			.loadEffect span:nth-child(4) {
				top: 8px;
				right: 8px;
				-webkit-animation-delay: 0.52s;
			}
			
			.loadEffect span:nth-child(5) {
				right: 0;
				top: 50%;
				margin-top: -4px;
				-webkit-animation-delay: 0.65s;
			}
			
			.loadEffect span:nth-child(6) {
				right: 8px;
				bottom: 8px;
				-webkit-animation-delay: 0.78s;
			}
			
			.loadEffect span:nth-child(7) {
				bottom: 0;
				left: 50%;
				margin-left: -4px;
				-webkit-animation-delay: 0.91s;
			}
			
			.loadEffect span:nth-child(8) {
				bottom: 8px;
				left: 8px;
				-webkit-animation-delay: 1.04s;
			}
			
			.loadFalse{
				position: relative;
				width: 60px;
				height: 60px;
				border: 3px solid #ececec;
				border-radius: 100%;
				margin: auto;	
				display: none;			
			}
			.loadFalse>span{
				position: absolute;
				left: 50%;
				top: 50%;
				font-size: 30px;
				color: #ececec;
				-webkit-transform: translateX(-50%) translateY(-50%);
				-moz-transform: translateX(-50%) translateY(-50%);
				-ms-transform: translateX(-50%) translateY(-50%);
				-o-transform: translateX(-50%) translateY(-50%);
				transform: translateX(-50%) translateY(-50%);
			}
			.loadingText{
				color: #ececec;
				margin-top: 10px;
			}
			.bgLoading{
				position: fixed;
				left: 0;
				top: 0;
				width: 100%;
				height: 100%;
				background-color: rgba(0,0,0,0.3);
				display: none;
			}
		</style>
	</head>

	<body>
		<header class="header">
			赠与免单券与体验官资格
		</header>
		<div class="ereaContanier">
			<div class="ereatip">体验官地区</div>
			<form class="ereaSelect" action="" method=post name=form1>
				<div>地区</div>
				<select class="selectp" id="selectp" name="selectp" onChange="selectcityarea('selectp','selectc','form1');">
					<option value="0" selected>选择省份</option>
				</select>
				<select class="selectc" id="selectc" name="selectc">
					<option value="0" selected>选择城市</option>
				</select>
			</form>
		</div>

		<footer class="footer" id="creat">
			生成新二维码
		</footer>
		<div class="bgLoading" id="bgLoading"></div>
		<div class="loading" id="loading">
			<div class="loadEffect" id="loadEffect">
				<span></span>
				<span></span>
				<span></span>
				<span></span>
				<span></span>
				<span></span>
				<span></span>
				<span></span>
			</div>
			<div class="loadFalse" id="loadFalse">
				<span>!</span>
			</div>
			<div class="loadingText" id="loadingText">二维码生成中</div>
		</div>
		
	</body>
	<script src="js/city.js" type="text/javascript" charset="utf-8"></script>
	<script type="text/javascript">
		document.body.addEventListener('touchstart',function(){},false);
	
		first("selectp", "selectc", "form1", 0, 0);

		setSelectChecked('selectp','广东');
		selectcityarea('selectp','selectc','form1')
		setSelectChecked('selectc','广州');
		
		//生成二维码
		document.getElementById("creat").addEventListener('click',function(){
			document.getElementById("bgLoading").style.display = 'block';
			document.getElementById("loading").style.display = 'block';
			
			
			setTimeout(function(){
				
				document.getElementById("loadEffect").style.display = 'none';
				document.getElementById("loadFalse").style.display = 'block';
				document.getElementById("loadingText").innerHTML = '二维码加载失败';
				
				setTimeout(function(){
					document.getElementById("bgLoading").style.display = 'none';
					document.getElementById("loading").style.display = 'none';
				},2000);
				
				var province = document.getElementById("selectp");
				var city = document.getElementById("selectc");
//				alert(province.options[province.selectedIndex].text);
//				alert(city.options[city.selectedIndex].text);
			},3000)
			
		},false);
				
		/** 
		 * 设置select选中 
		 * @param selectId select的id值 
		 * @param checkValue 选中option的值 
		*/ 
		function setSelectChecked(selectId, checkValue){  
		    var select = document.getElementById(selectId);  
		    for(var i=0; i<select.options.length; i++){  
		        if(select.options[i].innerHTML == checkValue){  
		            select.options[i].selected = true;  
		            break;  
		        }  
		    }  
		};  
	</script>

</html>